<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENS 999 Club - Professional Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Apple-inspired color palette */
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f7;
            --bg-tertiary: #e8e8ed;
            --bg-card: #ffffff;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --text-tertiary: #515154;
            --accent: #0071e3;
            --accent-hover: #0077ed;
            --accent-light: #e3f2ff;
            --border-color: #d2d2d7;
            --shadow-sm: 0 2px 5px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 15px rgba(0,0,0,0.08);
            --shadow-lg: 0 10px 30px rgba(0,0,0,0.1);
            
            /* Tier colors - more subtle */
            --s-plus: #ff375f;
            --s-tier: #ff6900;
            --a-plus: #ff9500;
            --a-tier: #ffcc00;
            --b-plus: #34c759;
            --b-tier: #30d158;
            --c-plus: #00c7be;
            --c-tier: #64d2ff;
            --gulf-gold: #ffcc00;
            
            /* Spacing system */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            
            /* Border radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.25rem;
        }

        /* Dark mode */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #000000;
                --bg-secondary: #1c1c1e;
                --bg-tertiary: #2c2c2e;
                --bg-card: #1c1c1e;
                --text-primary: #f5f5f7;
                --text-secondary: #86868b;
                --text-tertiary: #98989d;
                --border-color: #38383a;
                --shadow-sm: 0 2px 5px rgba(0,0,0,0.3);
                --shadow-md: 0 4px 15px rgba(0,0,0,0.4);
                --shadow-lg: 0 10px 30px rgba(0,0,0,0.5);
                --accent-light: #001833;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.47;
            font-size: 17px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Typography */
        h1 {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.015em;
            line-height: 1.08;
        }

        h2 {
            font-size: 32px;
            font-weight: 600;
            letter-spacing: -0.01em;
            line-height: 1.2;
            margin-bottom: var(--space-md);
        }

        h3 {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.005em;
            line-height: 1.3;
            margin-bottom: var(--space-sm);
        }

        h4 {
            font-size: 20px;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: var(--space-sm);
        }

        p {
            font-size: 17px;
            line-height: 1.47;
            color: var(--text-primary);
        }

        /* Smooth animations */
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(10px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Header */
        header {
            background: var(--bg-primary);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            animation: fadeIn 0.6s ease;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-xl) var(--space-lg);
            text-align: center;
        }

        .header-content h1 {
            margin-bottom: var(--space-sm);
            background: linear-gradient(180deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 21px;
            font-weight: 400;
        }

        .credit {
            margin-top: var(--space-md);
            color: var(--text-tertiary);
            font-size: 14px;
        }

        /* Navigation */
        nav {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 112px;
            z-index: 999;
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            gap: var(--space-xs);
            padding: var(--space-md) var(--space-lg);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .nav-container::-webkit-scrollbar {
            display: none;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            font-size: 15px;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
            position: relative;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }

        .nav-link.active {
            color: var(--accent);
            background: var(--accent-light);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-2xl) var(--space-lg);
        }

        /* Section */
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .stat-card {
            background: var(--bg-card);
            padding: var(--space-xl);
            border-radius: var(--radius-lg);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent) 0%, var(--s-plus) 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .stat-number {
            font-size: 56px;
            font-weight: 700;
            letter-spacing: -0.02em;
            background: linear-gradient(180deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: var(--space-sm);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 17px;
            font-weight: 400;
        }

        /* Buttons */
        .button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--radius-md);
            font-size: 17px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
            outline: none;
            background: var(--accent);
            color: white;
        }

        .button:hover {
            background: var(--accent-hover);
            transform: scale(1.02);
        }

        .button:active {
            transform: scale(0.98);
        }

        .button-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .button-secondary:hover {
            background: var(--border-color);
        }

        /* Input fields */
        .input {
            width: 100%;
            padding: var(--space-md);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 17px;
            transition: all 0.2s ease;
            outline: none;
        }

        .input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-light);
        }

        .select {
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2386868b' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
        }

        /* Rarity Cards */
        .rarity-grid {
            display: grid;
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .rarity-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            border: 1px solid var(--border-color);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .rarity-card:hover {
            transform: translateX(8px);
            box-shadow: var(--shadow-md);
        }

        .rarity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .rarity-tier {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .tier-s-plus { color: var(--s-plus); }
        .tier-s { color: var(--s-tier); }
        .tier-a-plus { color: var(--a-plus); }
        .tier-a { color: var(--a-tier); }
        .tier-b-plus { color: var(--b-plus); }
        .tier-b { color: var(--b-tier); }
        .tier-c-plus { color: var(--c-plus); }
        .tier-c { color: var(--c-tier); }

        .rarity-count {
            font-size: 15px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .rarity-examples {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
            margin-top: var(--space-md);
        }

        .example-chip {
            background: var(--bg-secondary);
            padding: var(--space-xs) var(--space-md);
            border-radius: 999px;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .example-chip:hover {
            background: var(--accent);
            color: white;
            transform: scale(1.05);
        }

        /* Numbers Grid */
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: var(--space-md);
            margin-top: var(--space-xl);
        }

        .number-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .number-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            border-color: var(--accent);
        }

        .number {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: var(--space-xs);
            font-variant-numeric: tabular-nums;
        }

        .number-tier {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: var(--space-lg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: var(--space-2xl);
            max-width: 600px;
            width: 100%;
            position: relative;
            animation: slideIn 0.3s ease;
            box-shadow: var(--shadow-lg);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-close {
            position: absolute;
            top: var(--space-lg);
            right: var(--space-lg);
            background: var(--bg-tertiary);
            border: none;
            color: var(--text-secondary);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        /* Guide Content */
        .guide-content {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
            border: 1px solid var(--border-color);
        }

        .guide-content h3 {
            color: var(--text-primary);
            margin: var(--space-xl) 0 var(--space-md) 0;
        }

        .guide-content h3:first-child {
            margin-top: 0;
        }

        .guide-content ul {
            list-style: none;
            padding-left: 0;
        }

        .guide-content li {
            position: relative;
            padding-left: var(--space-lg);
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .guide-content li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: 600;
        }

        /* Tables */
        .table-container {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--border-color);
            margin-bottom: var(--space-xl);
        }

        .rankings-table {
            width: 100%;
            border-collapse: collapse;
        }

        .rankings-table th {
            background: var(--bg-secondary);
            padding: var(--space-md);
            text-align: left;
            font-weight: 600;
            font-size: 15px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .rankings-table td {
            padding: var(--space-md);
            border-bottom: 1px solid var(--border-color);
            font-size: 17px;
        }

        .rankings-table tr:hover {
            background: var(--bg-secondary);
            cursor: pointer;
        }

        .rankings-table tr:last-child td {
            border-bottom: none;
        }

        /* Rank colors */
        .rank-number {
            font-weight: 600;
            font-variant-numeric: tabular-nums;
        }

        .rank-1 { color: var(--gulf-gold); }
        .rank-2 { color: var(--text-secondary); }
        .rank-3 { color: #cd7f32; }

        /* Trait Tags */
        .trait-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-xs);
            margin-top: var(--space-sm);
        }

        .trait-tag {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            padding: var(--space-xs) var(--space-sm);
            border-radius: 999px;
            font-size: 13px;
            font-weight: 500;
            border: 1px solid var(--border-color);
        }

        .trait-tag.gulf {
            background: rgba(255, 204, 0, 0.1);
            color: var(--gulf-gold);
            border-color: var(--gulf-gold);
        }

        .trait-tag.religious {
            background: rgba(75, 0, 130, 0.1);
            color: #4b0082;
            border-color: #4b0082;
        }

        .trait-tag.tech {
            background: rgba(0, 206, 209, 0.1);
            color: #00ced1;
            border-color: #00ced1;
        }

        /* Mode Toggle */
        .mode-toggle {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 999px;
            padding: var(--space-sm) var(--space-lg);
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 1100;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 15px;
            font-weight: 500;
        }

        .mode-toggle:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .mode-toggle.active {
            background: var(--gulf-gold);
            color: var(--bg-primary);
            border-color: var(--gulf-gold);
        }

        /* Filters Section */
        .filters {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        /* Info boxes */
        .info-box {
            background: var(--accent-light);
            border: 1px solid var(--accent);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin: var(--space-md) 0;
        }

        .info-box p {
            color: var(--accent);
            font-size: 15px;
            margin: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 36px;
            }
            
            .nav-container {
                justify-content: flex-start;
                padding: var(--space-sm);
            }
            
            .numbers-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .stat-number {
                font-size: 40px;
            }
            
            .modal-content {
                padding: var(--space-lg);
            }
            
            .mode-toggle {
                bottom: var(--space-lg);
                right: var(--space-lg);
            }
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            background: var(--text-primary);
            color: var(--bg-primary);
            text-align: center;
            border-radius: var(--radius-sm);
            padding: var(--space-xs) var(--space-sm);
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 13px;
            white-space: nowrap;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Analysis Section Enhancements */
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .analysis-stat {
            text-align: center;
            padding: var(--space-lg);
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            transition: all 0.2s ease;
        }

        .analysis-stat:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .analysis-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: var(--space-xs);
            font-variant-numeric: tabular-nums;
        }

        .analysis-label {
            font-size: 14px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Price Calculator */
        .calc-input-group {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .calc-input-group .input {
            flex: 1;
            font-size: 24px;
            font-weight: 600;
            text-align: center;
        }

        .calc-result {
            background: linear-gradient(135deg, var(--accent-light), var(--bg-secondary));
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: center;
            margin-bottom: var(--space-xl);
        }

        .calc-result-value {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(180deg, var(--accent) 0%, var(--text-primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: var(--space-sm);
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>ENS 999 Club</h1>
            <p class="subtitle">Professional Rarity Explorer & Analytics Platform</p>
            <p class="credit">Designed by crypr0xi.eth</p>
        </div>
    </header>

    <div class="mode-toggle" onclick="toggleGulfMode()">
        <span>üåç</span>
        <span>Gulf Mode: <strong id="modeStatus">OFF</strong></span>
    </div>

    <nav>
        <div class="nav-container">
            <a href="#overview" class="nav-link active" onclick="showSection('overview')">Overview</a>
            <a href="#rarities" class="nav-link" onclick="showSection('rarities')">Rarity Tiers</a>
            <a href="#traits" class="nav-link" onclick="showSection('traits')">Advanced Traits</a>
            <a href="#insights" class="nav-link" onclick="showSection('insights')">Analytics</a>
            <a href="#rankings" class="nav-link" onclick="showSection('rankings')">Rankings</a>
            <a href="#explorer" class="nav-link" onclick="showSection('explorer')">Explorer</a>
            <a href="#calculator" class="nav-link" onclick="showSection('calculator')">Valuation</a>
            <a href="#guide" class="nav-link" onclick="showSection('guide')">Guide</a>
        </div>
    </nav>

    <div class="container">
        <!-- Overview Section -->
        <section id="overview" class="section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">1,000</div>
                    <div class="stat-label">Total Domains</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">000</div>
                    <div class="stat-label">Genesis Number</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Trait Categories</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Rarity Tiers</div>
                </div>
            </div>

            <div class="guide-content">
                <h3>Welcome to ENS 999 Club Explorer</h3>
                <p>The most comprehensive analytics platform for 3-digit ENS domains (000-999). Our enhanced scoring system combines traditional pattern recognition with cultural significance, regional preferences, and advanced trait analysis.</p>
                
                <h3>Key Features</h3>
                <ul>
                    <li><strong>Advanced Trait System:</strong> 12 unique trait categories with stacking bonuses</li>
                    <li><strong>Regional Analysis:</strong> Gulf Mode for Middle Eastern market insights</li>
                    <li><strong>Smart Analytics:</strong> AI-powered number analysis and similarity detection</li>
                    <li><strong>Real-time Valuation:</strong> Dynamic pricing based on rarity scores</li>
                    <li><strong>Professional Interface:</strong> Clean, intuitive design inspired by Apple</li>
                </ul>

                <div class="info-box">
                    <p>üí° <strong>Pro Tip:</strong> Enable Gulf Mode to see how values shift for Middle Eastern markets, where certain numbers carry premium cultural significance.</p>
                </div>
            </div>
        </section>

        <!-- Rarity Tiers Section -->
        <section id="rarities" class="section">
            <h2>Rarity Classification System</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">Traditional patterns that form the foundation of ENS 999 Club valuation</p>

            <div class="rarity-grid">
                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-s-plus">S+</span>
                        <span class="rarity-count">10 domains ‚Ä¢ 1%</span>
                    </div>
                    <h3>Triple Digits</h3>
                    <p>The crown jewels where all three digits are identical. Maximum visual impact and memorability.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">000</span>
                        <span class="example-chip">111</span>
                        <span class="example-chip">222</span>
                        <span class="example-chip">333</span>
                        <span class="example-chip">444</span>
                        <span class="example-chip">555</span>
                        <span class="example-chip">666</span>
                        <span class="example-chip">777</span>
                        <span class="example-chip">888</span>
                        <span class="example-chip">999</span>
                    </div>
                </div>

                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-s">S</span>
                        <span class="rarity-count">9 domains ‚Ä¢ 0.9%</span>
                    </div>
                    <h3>First Ten (00X)</h3>
                    <p>Elite single digits with double leading zeros. Includes the legendary 007.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">001</span>
                        <span class="example-chip">002</span>
                        <span class="example-chip">003</span>
                        <span class="example-chip">004</span>
                        <span class="example-chip">005</span>
                        <span class="example-chip">006</span>
                        <span class="example-chip">007</span>
                        <span class="example-chip">008</span>
                        <span class="example-chip">009</span>
                    </div>
                </div>

                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-a-plus">A+</span>
                        <span class="rarity-count">~30 domains ‚Ä¢ 3%</span>
                    </div>
                    <h3>Premium Patterns</h3>
                    <p>Cultural icons, perfect sequences, and high-value palindromes.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">123</span>
                        <span class="example-chip">321</span>
                        <span class="example-chip">420</span>
                        <span class="example-chip">404</span>
                        <span class="example-chip">101</span>
                        <span class="example-chip">212</span>
                        <span class="example-chip">808</span>
                        <span class="example-chip">911</span>
                    </div>
                </div>

                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-a">A</span>
                        <span class="rarity-count">~50 domains ‚Ä¢ 5%</span>
                    </div>
                    <h3>Classic Patterns</h3>
                    <p>Standard palindromes, centuries, and ascending/descending sequences.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">100</span>
                        <span class="example-chip">200</span>
                        <span class="example-chip">345</span>
                        <span class="example-chip">543</span>
                        <span class="example-chip">131</span>
                        <span class="example-chip">242</span>
                    </div>
                </div>

                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-b-plus">B+</span>
                        <span class="rarity-count">~100 domains ‚Ä¢ 10%</span>
                    </div>
                    <h3>Premium Numbers</h3>
                    <p>Leading zeros, cultural significance, or premium area/country codes.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">045</span>
                        <span class="example-chip">088</span>
                        <span class="example-chip">971</span>
                        <span class="example-chip">966</span>
                        <span class="example-chip">786</span>
                    </div>
                </div>

                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-b">B</span>
                        <span class="rarity-count">~150 domains ‚Ä¢ 15%</span>
                    </div>
                    <h3>Double Patterns</h3>
                    <p>Two identical digits in various positions creating visual appeal.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">110</span>
                        <span class="example-chip">221</span>
                        <span class="example-chip">344</span>
                        <span class="example-chip">655</span>
                        <span class="example-chip">766</span>
                    </div>
                </div>

                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-c-plus">C+</span>
                        <span class="rarity-count">~200 domains ‚Ä¢ 20%</span>
                    </div>
                    <h3>Notable Numbers</h3>
                    <p>Area codes, service numbers, or other recognizable combinations.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">213</span>
                        <span class="example-chip">415</span>
                        <span class="example-chip">411</span>
                        <span class="example-chip">511</span>
                        <span class="example-chip">611</span>
                    </div>
                </div>

                <div class="rarity-card">
                    <div class="rarity-header">
                        <span class="rarity-tier tier-c">C</span>
                        <span class="rarity-count">~450 domains ‚Ä¢ 45%</span>
                    </div>
                    <h3>Standard Numbers</h3>
                    <p>No special patterns. These form the collection's floor price baseline.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">357</span>
                        <span class="example-chip">468</span>
                        <span class="example-chip">592</span>
                        <span class="example-chip">748</span>
                        <span class="example-chip">836</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advanced Traits Section -->
        <section id="traits" class="section">
            <h2>Advanced Trait System</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">Cultural and regional factors that enhance traditional pattern values</p>

            <div class="rarity-grid">
                <!-- Genesis Trait -->
                <div class="rarity-card" style="border-color: var(--gulf-gold); background: linear-gradient(to bottom right, var(--bg-card), rgba(255, 204, 0, 0.05));">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: var(--gulf-gold);">GENESIS</span>
                        <span class="rarity-count">1 domain only</span>
                    </div>
                    <h3>The Absolute Beginning</h3>
                    <p>000 represents the genesis of all numbers - the void from which mathematics emerges. Guaranteed #1 position forever.</p>
                    <div class="rarity-examples">
                        <span class="example-chip" style="background: linear-gradient(135deg, var(--gulf-gold), var(--a-plus)); color: white;">000</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +5,000 points ‚Ä¢ Sold for 300 ETH (July 2022)</p>
                </div>

                <!-- Regional Ultra Prestige -->
                <div class="rarity-card" style="border-color: var(--gulf-gold);">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: var(--gulf-gold);">GULF ULTRA</span>
                        <span class="rarity-count">5 domains</span>
                    </div>
                    <h3>GCC Country Codes</h3>
                    <p>Premium Gulf Cooperation Council codes with extreme regional demand and cultural significance.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">971</span>
                        <span class="example-chip">974</span>
                        <span class="example-chip">966</span>
                        <span class="example-chip">965</span>
                        <span class="example-chip">973</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +2,000 to +6,000 points ‚Ä¢ 1.15x multiplier in Gulf Mode</p>
                </div>

                <!-- Religious/Cultural -->
                <div class="rarity-card" style="border-color: #8B008B;">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: #8B008B;">RELIGIOUS</span>
                        <span class="rarity-count">5+ domains</span>
                    </div>
                    <h3>Spiritual Significance</h3>
                    <p>Numbers with deep religious or cultural meaning across global communities.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">786</span>
                        <span class="example-chip">613</span>
                        <span class="example-chip">108</span>
                        <span class="example-chip">018</span>
                        <span class="example-chip">120</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +1,000 to +2,000 points ‚Ä¢ Community premium</p>
                </div>

                <!-- Tech/Internet Icons -->
                <div class="rarity-card" style="border-color: #00CED1;">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: #00CED1;">TECH ICON</span>
                        <span class="rarity-count">5+ domains</span>
                    </div>
                    <h3>Digital Culture</h3>
                    <p>Numbers embedded in technology culture, internet memes, and digital history.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">404</span>
                        <span class="example-chip">420</span>
                        <span class="example-chip">314</span>
                        <span class="example-chip">512</span>
                        <span class="example-chip">808</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +400 to +1,200 points ‚Ä¢ Crypto native appeal</p>
                </div>

                <!-- Premium Area Codes -->
                <div class="rarity-card" style="border-color: var(--accent);">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: var(--accent);">AREA CODE</span>
                        <span class="rarity-count">10+ domains</span>
                    </div>
                    <h3>Premium US Markets</h3>
                    <p>Elite area codes from major metropolitan areas with brand recognition.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">212</span>
                        <span class="example-chip">213</span>
                        <span class="example-chip">415</span>
                        <span class="example-chip">310</span>
                        <span class="example-chip">646</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +600 to +900 points ‚Ä¢ Regional appeal</p>
                </div>

                <!-- Clean Numbers -->
                <div class="rarity-card" style="border-color: var(--b-plus);">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: var(--b-plus);">CLEAN</span>
                        <span class="rarity-count">Variable count</span>
                    </div>
                    <h3>Auspicious Digits Only</h3>
                    <p>Numbers containing only lucky digits (0, 1, 7, 8, 9) with no 4 or 6.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">079</span>
                        <span class="example-chip">178</span>
                        <span class="example-chip">890</span>
                        <span class="example-chip">107</span>
                        <span class="example-chip">789</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +150 to +500 points ‚Ä¢ Asian market premium</p>
                </div>

                <!-- International Country Codes -->
                <div class="rarity-card" style="border-color: #4B0082;">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: #4B0082;">COUNTRY</span>
                        <span class="rarity-count">100+ domains</span>
                    </div>
                    <h3>International Dialing Codes</h3>
                    <p>Country codes representing nations worldwide. Premium codes from major economies and financial centers.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">001</span>
                        <span class="example-chip">044</span>
                        <span class="example-chip">086</span>
                        <span class="example-chip">852</span>
                        <span class="example-chip">065</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +400 to +900 points ‚Ä¢ Based on economic strength</p>
                </div>

                <!-- Luxury Cars -->
                <div class="rarity-card" style="border-color: #DC143C;">
                    <div class="rarity-header">
                        <span class="rarity-tier" style="color: #DC143C;">LUXURY CAR</span>
                        <span class="rarity-count">50+ domains</span>
                    </div>
                    <h3>Iconic Car Models</h3>
                    <p>Model numbers from legendary luxury and sports cars. These override the bad digit penalty for 4 and 6.</p>
                    <div class="rarity-examples">
                        <span class="example-chip">911</span>
                        <span class="example-chip">458</span>
                        <span class="example-chip">720</span>
                        <span class="example-chip">300</span>
                        <span class="example-chip">488</span>
                    </div>
                    <p style="margin-top: var(--space-md); color: var(--text-secondary);">Bonus: +300 points ‚Ä¢ Overrides bad digit penalties</p>
                </div>
            </div>

            <div class="guide-content" style="margin-top: var(--space-xl);">
                <h3>Trait Stacking Mechanics</h3>
                <ul>
                    <li><strong>Maximum Cap:</strong> Total trait bonuses capped at +3,500 (except 000)</li>
                    <li><strong>Multiplicative Effects:</strong> Gulf Mode applies 1.15x to regional traits</li>
                    <li><strong>Base Pattern Priority:</strong> Traditional patterns remain foundation</li>
                    <li><strong>Cultural Context:</strong> Some traits vary by region (e.g., 666)</li>
                    <li><strong>Market Dynamics:</strong> Trait values fluctuate with demand</li>
                </ul>
            </div>
        </section>

        <!-- Smart Insights Section -->
        <section id="insights" class="section">
            <h2>Advanced Analytics</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">AI-powered analysis and market insights</p>

            <!-- Number Analyzer -->
            <div class="card">
                <h3>Number Analysis Engine</h3>
                <div class="calc-input-group">
                    <input type="text" id="insightNumber" class="input" placeholder="Enter number (e.g., 971)" 
                           maxlength="3" oninput="analyzeNumber()">
                    <button onclick="analyzeNumber()" class="button">Analyze</button>
                    <button onclick="getRandomNumber()" class="button button-secondary">üé≤ Random</button>
                </div>

                <div id="numberAnalysis" style="display: none;">
                    <!-- Analysis results will appear here -->
                </div>
            </div>

            <!-- Similar Numbers -->
            <div class="card" style="margin-top: var(--space-xl);">
                <h3>Similar Numbers Discovery</h3>
                <p style="color: var(--text-secondary); margin-bottom: var(--space-md);">Numbers with comparable trait patterns</p>
                <div id="similarNumbers" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: var(--space-md);">
                    <!-- Similar numbers will appear here -->
                </div>
            </div>

            <!-- Trait Breakdown -->
            <div class="card" style="margin-top: var(--space-xl);">
                <h3>Score Composition Analysis</h3>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-md);">
                    <p style="color: var(--text-secondary);">Visual breakdown of scoring components</p>
                    <div id="totalScore" style="font-size: 28px; font-weight: 700; color: var(--accent);"></div>
                </div>
                <div id="traitChart" style="min-height: 200px;">
                    <!-- Chart will be rendered here -->
                </div>
            </div>

            <!-- Top Performers -->
            <div class="card" style="margin-top: var(--space-xl);">
                <h3>Category Leaders</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-lg); margin-top: var(--space-lg);">
                    <div>
                        <h4 style="color: var(--gulf-gold);">üåç Gulf Premium</h4>
                        <div id="topGulf"></div>
                    </div>
                    <div>
                        <h4 style="color: #8B008B;">üïäÔ∏è Religious/Cultural</h4>
                        <div id="topReligious"></div>
                    </div>
                    <div>
                        <h4 style="color: #00CED1;">üíª Tech/Internet</h4>
                        <div id="topTech"></div>
                    </div>
                    <div>
                        <h4 style="color: var(--b-plus);">‚ú® Clean Numbers</h4>
                        <div id="topClean"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rankings Section -->
        <section id="rankings" class="section">
            <h2>Complete Rankings</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">All 1,000 domains ranked by enhanced scoring algorithm</p>
            
            <div class="filters">
                <div class="filter-group">
                    <select class="input select" id="rankingView" onchange="updateRankingView()">
                        <option value="50">Top 50</option>
                        <option value="100">Top 100</option>
                        <option value="250">Top 250</option>
                        <option value="500">Top 500</option>
                        <option value="1000">All 1,000</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select class="input select" id="traitFilter" onchange="updateRankingView()">
                        <option value="">All Numbers</option>
                        <option value="gulf">Gulf Premium</option>
                        <option value="religious">Religious/Cultural</option>
                        <option value="tech">Tech/Internet</option>
                        <option value="clean">Clean Numbers</option>
                    <option value="country">Country Codes</option>
                    <option value="luxury">Luxury Cars</option>
                    </select>
                </div>
            </div>
            
            <div class="table-container">
                <div id="rankingsContainer">
                    <!-- Rankings will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Explorer Section -->
        <section id="explorer" class="section">
            <h2>Visual Explorer</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">Browse all 1,000 domains with advanced filtering</p>

            <div class="filters">
                <div class="filter-group">
                    <input type="text" class="input" id="searchInput" placeholder="Search number (e.g., 420)" oninput="filterNumbers()">
                </div>
                <div class="filter-group">
                    <select class="input select" id="tierFilter" onchange="filterNumbers()">
                        <option value="">All Tiers</option>
                        <option value="S+">S+ - Ultra Rare</option>
                        <option value="S">S - Very Rare</option>
                        <option value="A+">A+ - Extremely Rare</option>
                        <option value="A">A - Rare</option>
                        <option value="B+">B+ - Valuable</option>
                        <option value="B">B - Notable</option>
                        <option value="C+">C+ - Standard+</option>
                        <option value="C">C - Standard</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select class="input select" id="patternFilter" onchange="filterNumbers()">
                        <option value="">All Patterns</option>
                        <option value="triple">Triples</option>
                        <option value="palindrome">Palindromes</option>
                        <option value="sequence">Sequences</option>
                        <option value="double">Doubles</option>
                        <option value="leading-zero">Leading Zero</option>
                        <option value="gulf-premium">Gulf Premium</option>
                        <option value="religious">Religious</option>
                        <option value="tech">Tech Icon</option>
                        <option value="country">Country Codes</option>
                        <option value="luxury">Luxury Cars</option>
                    </select>
                </div>
            </div>
            
            <div id="numbersGrid" class="numbers-grid">
                <!-- Numbers will be populated by JavaScript -->
            </div>
        </section>

        <!-- Calculator Section -->
        <section id="calculator" class="section">
            <h2>Valuation Calculator</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">Estimate domain value based on rarity score and market conditions</p>

            <div class="card">
                <h3>Market Parameters</h3>
                <div class="calc-input-group">
                    <input type="number" id="floorPrice" class="input" placeholder="Floor price" 
                           value="10" step="0.1">
                    <span style="font-size: 24px; font-weight: 600; color: var(--text-secondary);">ETH</span>
                </div>

                <h3>Your Number</h3>
                <div class="calc-input-group">
                    <input type="text" id="calcNumber" class="input" placeholder="000-999" 
                           maxlength="3" oninput="calculatePrice()">
                    <button onclick="calculatePrice()" class="button">Calculate Value</button>
                </div>

                <div id="calcResults" style="display: none;">
                    <!-- Results will appear here -->
                </div>
            </div>

            <!-- Reference Table -->
            <div class="card" style="margin-top: var(--space-xl);">
                <h3>Historical Multiplier Reference</h3>
                <p style="color: var(--text-secondary); margin-bottom: var(--space-lg);">Based on market analysis and past sales data</p>
                
                <div class="table-container">
                    <table class="rankings-table">
                        <thead>
                            <tr>
                                <th>Tier</th>
                                <th>Pattern Type</th>
                                <th>Typical Multiplier</th>
                                <th>Notable Sales</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="tier-s-plus">S+</span></td>
                                <td>Triples (XXX)</td>
                                <td style="color: var(--s-plus); font-weight: 600;">50-100x</td>
                                <td>000.eth: 300 ETH</td>
                            </tr>
                            <tr>
                                <td><span class="tier-s">S</span></td>
                                <td>First Ten (00X)</td>
                                <td style="color: var(--s-tier); font-weight: 600;">20-30x</td>
                                <td>007.eth: Premium</td>
                            </tr>
                            <tr>
                                <td><span class="tier-a-plus">A+</span></td>
                                <td>Premium Patterns</td>
                                <td style="color: var(--a-plus); font-weight: 600;">10-20x</td>
                                <td>420.eth: 30+ ETH</td>
                            </tr>
                            <tr>
                                <td><span class="tier-a">A</span></td>
                                <td>Classic Patterns</td>
                                <td style="color: var(--a-tier); font-weight: 600;">5-15x</td>
                                <td>Palindromes, Centuries</td>
                            </tr>
                            <tr>
                                <td><span class="tier-b-plus">B+</span></td>
                                <td>Premium Numbers</td>
                                <td style="color: var(--b-plus); font-weight: 600;">3-8x</td>
                                <td>Country codes, Area codes</td>
                            </tr>
                            <tr>
                                <td><span class="tier-b">B</span></td>
                                <td>Double Patterns</td>
                                <td style="color: var(--b-tier); font-weight: 600;">2-4x</td>
                                <td>Standard doubles</td>
                            </tr>
                            <tr>
                                <td><span class="tier-c-plus">C+</span></td>
                                <td>Notable Numbers</td>
                                <td style="color: var(--c-plus); font-weight: 600;">1.5-2.5x</td>
                                <td>Service numbers</td>
                            </tr>
                            <tr>
                                <td><span class="tier-c">C</span></td>
                                <td>Standard Numbers</td>
                                <td style="color: var(--c-tier); font-weight: 600;">1x</td>
                                <td>Floor baseline</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box" style="margin-top: var(--space-xl);">
                    <p>‚ö†Ô∏è <strong>Disclaimer:</strong> These are estimates based on historical data. Actual prices depend on market conditions, buyer interest, and timing.</p>
                </div>
            </div>
        </section>

        <!-- Guide Section -->
        <section id="guide" class="section">
            <h2>Comprehensive Guide</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">Master the ENS 999 Club ecosystem</p>

            <div class="card">
                <h3>Understanding the Scoring System</h3>
                <p>Our enhanced algorithm combines multiple factors to determine each number's rarity score and market value.</p>

                <h4 style="margin-top: var(--space-xl);">Base Pattern Scoring</h4>
                <ul>
                    <li><strong>Triples (XXX):</strong> 8,000-15,000 points - Ultimate rarity</li>
                    <li><strong>First Ten (00X):</strong> 7,600-9,500 points - Elite tier</li>
                    <li><strong>Premium Sequences:</strong> 6,000-7,500 points - Cultural icons</li>
                    <li><strong>Palindromes:</strong> 3,000-6,000 points - Symmetrical beauty</li>
                    <li><strong>Centuries (X00):</strong> 3,500-4,200 points - Round hundreds</li>
                    <li><strong>Double Digits:</strong> 1,500-2,500 points - Visual appeal</li>
                    <li><strong>Standard Numbers:</strong> 100-500 points - Baseline</li>
                </ul>

                <h4 style="margin-top: var(--space-xl);">Advanced Trait System</h4>
                <ul>
                    <li><strong>Regional Prestige:</strong> +1,200 to +3,000 - Country codes</li>
                    <li><strong>Religious/Cultural:</strong> +1,000 to +2,000 - Spiritual significance</li>
                    <li><strong>Tech/Internet:</strong> +400 to +1,200 - Digital culture</li>
                    <li><strong>Area Codes:</strong> +600 to +900 - Metropolitan premium</li>
                    <li><strong>Clean Numbers:</strong> +150 to +500 - No unlucky digits</li>
                    <li><strong>Lucky Dominance:</strong> +150 to +400 - Multiple 7,8,9</li>
                </ul>
            </div>

            <div class="card" style="margin-top: var(--space-xl);">
                <h3>Market Strategies</h3>
                
                <h4>Regional Arbitrage</h4>
                <p>Different markets value numbers differently. Understanding these preferences creates opportunities:</p>
                <ul>
                    <li><strong>Gulf Markets:</strong> Premium for 8s, country codes, plate patterns</li>
                    <li><strong>Asian Markets:</strong> Lucky numbers (8,9), avoid 4</li>
                    <li><strong>Western Markets:</strong> Cultural references, area codes</li>
                    <li><strong>Crypto Native:</strong> Tech numbers, memes, binary patterns</li>
                </ul>

                <h4 style="margin-top: var(--space-xl);">Investment Approaches</h4>
                <ul>
                    <li><strong>Blue Chip Strategy:</strong> Focus on S+ and S tier for stability</li>
                    <li><strong>Cultural Arbitrage:</strong> Buy undervalued regional numbers</li>
                    <li><strong>Trait Stacking:</strong> Find numbers with multiple premium traits</li>
                    <li><strong>Floor Sweeping:</strong> Accumulate C tier for portfolio diversity</li>
                    <li><strong>Event Trading:</strong> Political numbers during elections</li>
                </ul>

                <h4 style="margin-top: var(--space-xl);">Valuation Factors</h4>
                <ul>
                    <li><strong>Pattern Clarity:</strong> How obvious is the pattern?</li>
                    <li><strong>Cultural Weight:</strong> Does it mean something special?</li>
                    <li><strong>Market Timing:</strong> Current trends and preferences</li>
                    <li><strong>Trait Synergy:</strong> Do traits complement each other?</li>
                    <li><strong>Regional Appeal:</strong> Multi-market demand</li>
                </ul>
            </div>

            <div class="card" style="margin-top: var(--space-xl);">
                <h3>Case Studies</h3>
                
                <h4>971 - The Gulf Crown Jewel</h4>
                <div style="background: var(--bg-secondary); padding: var(--space-lg); border-radius: var(--radius-md); margin: var(--space-md) 0;">
                    <ul>
                        <li>Base: Standard number (100 points)</li>
                        <li>Regional Ultra Prestige: +6,000 points (Dubai Premium)</li>
                        <li>Lucky digits (7,9): +70 points</li>
                        <li>Gulf Premium Pair: +350 points</li>
                        <li>Gulf Mode multiplier: √ó1.15</li>
                        <li><strong>Final Score:</strong> ~7,383 points (Top 10-20)</li>
                    </ul>
                </div>

                <h4 style="margin-top: var(--space-xl);">420 - The Meme King</h4>
                <div style="background: var(--bg-secondary); padding: var(--space-lg); border-radius: var(--radius-md); margin: var(--space-md) 0;">
                    <ul>
                        <li>Base: Premium meme (7,500 points)</li>
                        <li>Tech/Internet Icon: +400 points</li>
                        <li>Cultural significance: Already included</li>
                        <li>Crypto native appeal: High demand</li>
                        <li><strong>Final Score:</strong> 7,900 points (Top 15)</li>
                    </ul>
                </div>

                <h4 style="margin-top: var(--space-xl);">000 - Genesis</h4>
                <div style="background: var(--bg-secondary); padding: var(--space-lg); border-radius: var(--radius-md); margin: var(--space-md) 0;">
                    <ul>
                        <li>Base: Ultimate triple (15,160 points)</li>
                        <li>Genesis bonus: +5,000 points</li>
                        <li>Gulf Plate Style: +400 points</li>
                        <li>Clean number: +150 points</li>
                        <li><strong>Final Score:</strong> 20,710 points (#1 Forever)</li>
                    </ul>
                </div>
            </div>

            <div class="card" style="margin-top: var(--space-xl);">
                <h3>Future Outlook</h3>
                
                <h4>Emerging Trends</h4>
                <ul>
                    <li><strong>Gulf Wealth Impact:</strong> Rising demand for GCC country codes</li>
                    <li><strong>Cultural Recognition:</strong> Religious numbers gaining global appeal</li>
                    <li><strong>Meme Evolution:</strong> New numbers entering tech culture</li>
                    <li><strong>Brand Building:</strong> Numbers as digital identity markers</li>
                    <li><strong>Cross-Chain Value:</strong> ENS numbers on multiple chains</li>
                </ul>

                <h4 style="margin-top: var(--space-xl);">Market Predictions</h4>
                <ul>
                    <li><strong>Short Term:</strong> Continued premium for clean patterns</li>
                    <li><strong>Medium Term:</strong> Regional traits gaining importance</li>
                    <li><strong>Long Term:</strong> Consolidation around blue chip numbers</li>
                </ul>

                <div class="info-box" style="margin-top: var(--space-xl);">
                    <p>üí° <strong>Pro Tip:</strong> The best investments combine strong base patterns with multiple cultural traits, creating appeal across different collector demographics.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <h2 id="modalTitle" style="margin-bottom: var(--space-lg);"></h2>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Global variables
        let numbersData = [];
        let gulfMode = false;
        let customWeights = {
            gulf: 1.15,
            religious: 2000,
            tech: 600,
            clean: 150
        };
        const TRAITS_CAP = 3500;

        // Enhanced trivia data
        const ENHANCED_TRIVIA = {
            "000": "The absolute beginning ‚Äì Genesis of all numbers.",
            "007": "James Bond ‚Äì iconic spy number from pop culture.",
            "420": "Cannabis culture reference ‚Äì internet meme.",
            "911": "Emergency number (US) ‚Äì cultural significance.",
            "971": "UAE country code ‚Äì Gulf premium number.",
            "966": "Saudi Arabia country code ‚Äì regional prestige.",
            "974": "Qatar country code ‚Äì Gulf wealth symbol.",
            "973": "Bahrain country code ‚Äì financial hub.",
            "968": "Oman country code ‚Äì Gulf heritage.",
            "965": "Kuwait country code ‚Äì oil wealth.",
            "786": "Bismillah in Islamic numerology ‚Äì deeply religious.",
            "613": "Number of Mitzvot in Judaism ‚Äì spiritual significance.",
            "404": "Error Not Found ‚Äì tech culture classic.",
            "314": "Pi reference (3.14) ‚Äì mathematical constant.",
            "808": "TR-808 drum machine ‚Äì revolutionized music.",
            "123": "The ultimate sequence ‚Äì natural counting.",
            "101": "Introduction course ‚Äì Computer Science basics.",
            "666": "Number of the beast (Western) / Lucky in some cultures.",
            "888": "Triple fortune in Chinese culture ‚Äì extreme luck.",
            "777": "Lucky sevens ‚Äì casino jackpot symbol.",
            "999": "Emergency number (UK) ‚Äì British equivalent to 911."
        };

        // Initialize data on load
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
            setupEventListeners();
            // Populate top performers on load
            setTimeout(() => populateTopPerformers(), 100);
        });

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', filterNumbers);
            document.getElementById('tierFilter').addEventListener('change', filterNumbers);
            document.getElementById('patternFilter').addEventListener('change', filterNumbers);
        }

        // Initialize numbers data with enhanced traits
        function initializeData() {
            numbersData = [];
            
            // Generate all 999 numbers (000-998)
            for (let i = 0; i <= 998; i++) {
                const num = i.toString().padStart(3, '0');
                const data = analyzeNumberEnhanced(num);
                numbersData.push({
                    number: num,
                    tier: data.tier,
                    patterns: data.patterns,
                    traits: data.traits,
                    description: data.description,
                    score: data.score,
                    baseScore: data.baseScore,
                    traitBonus: data.traitBonus
                });
            }
            
            // Add 999 specifically
            const num999 = '999';
            const data999 = analyzeNumberEnhanced(num999);
            numbersData.push({
                number: num999,
                tier: data999.tier,
                patterns: data999.patterns,
                traits: data999.traits,
                description: data999.description,
                score: data999.score,
                baseScore: data999.baseScore,
                traitBonus: data999.traitBonus
            });
            
            console.log('Total numbers generated:', numbersData.length); // Should be 1000 (000-999)
            
            // Sort by score and assign ranks
            updateRankings();
        }

        // Enhanced number analysis with traits
        function analyzeNumberEnhanced(num) {
            // Get base analysis
            const baseData = analyzeNumberBase(num);
            let score = baseData.score;
            const traits = [];
            let traitBonus = 0;

            // Genesis trait for 000
            if (num === '000') {
                traits.push({ name: 'Genesis - The First', bonus: 5000, type: 'genesis' });
                traitBonus += 5000;
            }

            // Regional Ultra Prestige (GCC) - Updated bonuses to match CSV
            if (['971', '974', '966', '965', '973'].includes(num)) {
                const gccBonus = {
                    '971': 6000,  // UAE - DUBAI PREMIUM - highest demand globally
                    '974': 3500,  // Qatar - wealthy nation
                    '966': 3000,  // Saudi - large market
                    '965': 2500,  // Kuwait - oil wealth
                    '973': 2000   // Bahrain - financial hub
                };
                traits.push({ name: 'Regional Ultra Prestige - UAE/Dubai', bonus: gccBonus[num], type: 'gulf' });
                traitBonus += gccBonus[num];
            }

            // International Country Codes
            const countryCodes = {
                // Major Economies
                '001': { bonus: 800, desc: 'USA/Canada International' },
                '044': { bonus: 700, desc: 'United Kingdom' },
                '033': { bonus: 600, desc: 'France' },
                '049': { bonus: 700, desc: 'Germany' },
                '039': { bonus: 600, desc: 'Italy' },
                '034': { bonus: 600, desc: 'Spain' },
                '031': { bonus: 500, desc: 'Netherlands' },
                '041': { bonus: 700, desc: 'Switzerland' },
                '046': { bonus: 600, desc: 'Sweden' },
                '047': { bonus: 600, desc: 'Norway' },
                '081': { bonus: 800, desc: 'Japan' },
                '082': { bonus: 700, desc: 'South Korea' },
                '086': { bonus: 800, desc: 'China' },
                '091': { bonus: 700, desc: 'India' },
                '061': { bonus: 600, desc: 'Australia' },
                '064': { bonus: 500, desc: 'New Zealand' },
                '055': { bonus: 600, desc: 'Brazil' },
                '052': { bonus: 600, desc: 'Mexico' },
                '007': { bonus: 700, desc: 'Russia' },
                
                // Financial Centers
                '852': { bonus: 900, desc: 'Hong Kong' },
                '065': { bonus: 900, desc: 'Singapore' },
                '353': { bonus: 700, desc: 'Ireland' },
                '352': { bonus: 700, desc: 'Luxembourg' },
                '376': { bonus: 600, desc: 'Andorra' },
                '377': { bonus: 700, desc: 'Monaco' },
                
                // Middle East & Asia
                '962': { bonus: 500, desc: 'Jordan' },
                '963': { bonus: 400, desc: 'Syria' },
                '964': { bonus: 500, desc: 'Iraq' },
                '967': { bonus: 400, desc: 'Yemen' },
                '975': { bonus: 400, desc: 'Bhutan' },
                '977': { bonus: 400, desc: 'Nepal' },
                '880': { bonus: 400, desc: 'Bangladesh' },
                '092': { bonus: 500, desc: 'Pakistan' },
                '093': { bonus: 400, desc: 'Afghanistan' },
                '094': { bonus: 400, desc: 'Sri Lanka' },
                '095': { bonus: 400, desc: 'Myanmar' },
                '066': { bonus: 500, desc: 'Thailand' },
                '062': { bonus: 500, desc: 'Indonesia' },
                '063': { bonus: 500, desc: 'Philippines' },
                '084': { bonus: 500, desc: 'Vietnam' },
                '060': { bonus: 500, desc: 'Malaysia' },
                
                // Africa
                '020': { bonus: 500, desc: 'Egypt' },
                '212': { bonus: 500, desc: 'Morocco' },
                '213': { bonus: 500, desc: 'Algeria' },
                '216': { bonus: 500, desc: 'Tunisia' },
                '234': { bonus: 600, desc: 'Nigeria' },
                '254': { bonus: 500, desc: 'Kenya' },
                '027': { bonus: 600, desc: 'South Africa' },
                
                // Europe
                '030': { bonus: 500, desc: 'Greece' },
                '032': { bonus: 500, desc: 'Belgium' },
                '036': { bonus: 500, desc: 'Hungary' },
                '040': { bonus: 500, desc: 'Romania' },
                '045': { bonus: 600, desc: 'Denmark' },
                '048': { bonus: 500, desc: 'Poland' },
                '351': { bonus: 500, desc: 'Portugal' },
                '354': { bonus: 400, desc: 'Iceland' },
                '355': { bonus: 400, desc: 'Albania' },
                '356': { bonus: 500, desc: 'Malta' },
                '357': { bonus: 500, desc: 'Cyprus' },
                '358': { bonus: 600, desc: 'Finland' },
                '359': { bonus: 400, desc: 'Bulgaria' },
                '370': { bonus: 400, desc: 'Lithuania' },
                '371': { bonus: 400, desc: 'Latvia' },
                '372': { bonus: 400, desc: 'Estonia' },
                '380': { bonus: 500, desc: 'Ukraine' },
                '381': { bonus: 500, desc: 'Serbia' },
                '385': { bonus: 500, desc: 'Croatia' },
                '386': { bonus: 500, desc: 'Slovenia' },
                '420': { bonus: 600, desc: 'Czech Republic' },
                '421': { bonus: 500, desc: 'Slovakia' },
                
                // Americas
                '054': { bonus: 500, desc: 'Argentina' },
                '056': { bonus: 500, desc: 'Chile' },
                '057': { bonus: 400, desc: 'Colombia' },
                '058': { bonus: 400, desc: 'Venezuela' },
                '051': { bonus: 400, desc: 'Peru' },
                '053': { bonus: 400, desc: 'Cuba' },
                '502': { bonus: 400, desc: 'Guatemala' },
                '503': { bonus: 400, desc: 'El Salvador' },
                '504': { bonus: 400, desc: 'Honduras' },
                '505': { bonus: 400, desc: 'Nicaragua' },
                '506': { bonus: 500, desc: 'Costa Rica' },
                '507': { bonus: 500, desc: 'Panama' }
            };
            
            if (countryCodes[num] && !baseData.description.includes('country code')) {
                traits.push({ 
                    name: `Country Code - ${countryCodes[num].desc}`, 
                    bonus: countryCodes[num].bonus, 
                    type: 'country' 
                });
                traitBonus += countryCodes[num].bonus;
            }

            // Leader/Political Brand
            if (num === '047') {
                traits.push({ name: 'Political/Leader Brand - Trump', bonus: 1200, type: 'political' });
                traitBonus += 1200;
            }

            // Religious/Cultural (Global) - Fixed numbers and bonuses
            const religiousNumbers = {
                '786': { bonus: 2000, desc: 'Bismillah' },
                '613': { bonus: 1800, desc: 'Mitzvot (◊™◊®◊ô◊¥◊í)' },
                '108': { bonus: 1500, desc: 'Sacred Number' },
                '018': { bonus: 1200, desc: 'Chai (18)' },
                '120': { bonus: 1200, desc: 'Biblical Age' }
            };
            if (religiousNumbers[num]) {
                traits.push({ 
                    name: `Religious/Cultural - ${religiousNumbers[num].desc}`, 
                    bonus: religiousNumbers[num].bonus, 
                    type: 'religious' 
                });
                traitBonus += religiousNumbers[num].bonus;
            }

            // Tech/Internet Icons - Fixed bonuses to match scoring
            const techIcons = {
                '420': { bonus: 400, desc: 'Meme - 420' },  
                '404': { bonus: 600, desc: 'Error Not Found' },
                '314': { bonus: 600, desc: 'Pi (3.14)' },
                '512': { bonus: 600, desc: 'Binary/Tech' },
                '808': { bonus: 600, desc: 'TR-808 Drum Machine' }
            };
            if (techIcons[num] && !baseData.description.includes(techIcons[num].desc)) {
                traits.push({ 
                    name: techIcons[num].desc, 
                    bonus: techIcons[num].bonus, 
                    type: 'tech' 
                });
                traitBonus += techIcons[num].bonus;
            }

            // Gulf Plate Style (endings) - Fixed to ensure 000 gets bonus
            if (num.endsWith('88')) {
                traits.push({ name: 'Gulf Plate Style - ends 88', bonus: 800, type: 'gulf' });
                traitBonus += 800;
            } else if (num.endsWith('99')) {
                traits.push({ name: 'Gulf Plate Style - ends 99', bonus: 600, type: 'gulf' });
                traitBonus += 600;
            } else if (num.endsWith('00')) {  // Removed exception for 000
                traits.push({ name: 'Gulf Plate Style - ends 00', bonus: 400, type: 'gulf' });
                traitBonus += 400;
            }

            // Regional Prestige (US Area Codes)
            const areaCodes = {
                '212': { bonus: 900, desc: 'Manhattan NYC' },
                '213': { bonus: 700, desc: 'Los Angeles' },
                '310': { bonus: 700, desc: 'Los Angeles' },
                '312': { bonus: 600, desc: 'Chicago' },
                '415': { bonus: 800, desc: 'San Francisco' },
                '646': { bonus: 700, desc: 'Manhattan NYC' },
                '917': { bonus: 600, desc: 'NYC Mobile' },
                '818': { bonus: 700, desc: 'Los Angeles Valley' }
            };
            if (areaCodes[num] && !baseData.description.includes('area code')) {
                traits.push({ 
                    name: `Premium Area Code - ${areaCodes[num].desc}`, 
                    bonus: areaCodes[num].bonus, 
                    type: 'area' 
                });
                traitBonus += areaCodes[num].bonus;
            }

            // Lucky Digit Dominance - Fixed calculation
            const luckyDigits = [num[0], num[1], num[2]].filter(d => ['7', '8', '9'].includes(d)).length;
            if (luckyDigits >= 2 && !baseData.patterns.includes('triple')) {
                const luckyBonus = 250; // Fixed at 250 to match CSV
                traits.push({ name: 'Lucky-Digit Dominance', bonus: luckyBonus, type: 'lucky' });
                traitBonus += luckyBonus;
            }

            // Luxury Car Models
            const luxuryCars = {
                // Porsche
                '911': 'Porsche 911', '930': 'Porsche 930', '935': 'Porsche 935', '959': 'Porsche 959',
                '918': 'Porsche 918', '992': 'Porsche 992', '991': 'Porsche 991', '997': 'Porsche 997',
                '993': 'Porsche 993', '964': 'Porsche 964', '981': 'Porsche 981', '982': 'Porsche 982',
                '718': 'Porsche 718',
                // Ferrari
                '250': 'Ferrari 250', '275': 'Ferrari 275', '288': 'Ferrari 288', '296': 'Ferrari 296',
                '308': 'Ferrari 308', '328': 'Ferrari 328', '348': 'Ferrari 348', '355': 'Ferrari 355',
                '360': 'Ferrari 360', '430': 'Ferrari 430', '458': 'Ferrari 458', '488': 'Ferrari 488',
                '512': 'Ferrari 512', '550': 'Ferrari 550', '575': 'Ferrari 575', '599': 'Ferrari 599',
                '612': 'Ferrari 612', '812': 'Ferrari 812',
                // Lamborghini
                '350': 'Lamborghini 350', '400': 'Lamborghini 400', '560': 'Lamborghini 560',
                '570': 'Lamborghini 570', '580': 'Lamborghini 580', '610': 'Lamborghini 610',
                '640': 'Lamborghini 640', '670': 'Lamborghini 670', '700': 'Lamborghini 700',
                '780': 'Lamborghini 780',
                // McLaren
                '540': 'McLaren 540', '570': 'McLaren 570', '600': 'McLaren 600', '650': 'McLaren 650',
                '675': 'McLaren 675', '720': 'McLaren 720', '765': 'McLaren 765',
                // Mercedes-Benz
                '300': 'Mercedes 300', '500': 'Mercedes 500', '560': 'Mercedes 560', '600': 'Mercedes 600',
                // BMW
                '750': 'BMW 750', '760': 'BMW 760', '850': 'BMW 850',
                // Others
                '110': 'Bugatti 110', '220': 'Jaguar 220', '222': 'Maserati 222', '228': 'Maserati 228'
            };
            
            if (luxuryCars[num]) {
                traits.push({ 
                    name: `Luxury Car - ${luxuryCars[num]}`, 
                    bonus: 300, 
                    type: 'luxury' 
                });
                traitBonus += 300;
            }

            // No Bad Digits (Clean) - Fixed bonus
            // Skip clean number penalty if it's a luxury car
            if (!num.includes('4') && !num.includes('6') && !luxuryCars[num]) {
                const cleanBonus = 150; // Fixed at 150 to match CSV
                traits.push({ name: 'No-Bad-Digits', bonus: cleanBonus, type: 'clean' });
                traitBonus += cleanBonus;
            }

            // 0X0 Mid-Digit Weighting - Updated to match CSV scoring
            if (num[0] === '0' && num[2] === '0' && num[1] !== '0') {
                const midDigitBonus = {
                    '8': 700,  // 080 best
                    '7': 600,  // 070 second
                    '9': 500,  // 090 third
                    '2': 300,  // 020
                    '3': 200,  // 030
                    '5': 100,  // 050
                    '1': 50,   // 010
                    '6': 0,    // 060 neutral
                    '4': -200  // 040 worst
                };
                const bonus = midDigitBonus[num[1]] || 0;
                if (bonus !== 0) {
                    traits.push({ 
                        name: `0X0 Mid-Digit ${bonus > 0 ? 'Bonus' : 'Penalty'}`, 
                        bonus: bonus, 
                        type: '0x0' 
                    });
                    traitBonus += bonus;
                }
            }

            // First 100 Memorability - Fixed to match CSV (0XX format)
            if (parseInt(num) >= 10 && parseInt(num) <= 99 && 
                !baseData.patterns.includes('first-ten') && 
                !(num[0] === '0' && num[2] === '0')) {
                const firstHundredBonus = 250; // Fixed at 250 to match CSV
                traits.push({ name: 'First-100 Memorability (0XX)', bonus: firstHundredBonus, type: 'first100' });
                traitBonus += firstHundredBonus;
            }

            // Extreme Memorability (Visual) - XYX patterns where X‚â†Y
            if (num[0] === num[2] && num[0] !== num[1] && 
                !baseData.patterns.includes('triple') && 
                !(num[0] === '0' && num[2] === '0')) {
                const visualBonus = 300;
                traits.push({ name: 'Extreme Memorability (Visual)', bonus: visualBonus, type: 'visual' });
                traitBonus += visualBonus;
            }

            // Gulf Premium Pair (97) - Fixed to match CSV
            if (num.includes('97')) {
                if (!traits.some(t => t.name.includes('Regional Ultra'))) {
                    traits.push({ name: "Gulf Premium Pair '97'", bonus: 250, type: 'gulf' });
                    traitBonus += 250;
                }
            }

            // Apply traits cap (except for 000 and Gulf country codes)
            if (num !== '000' && !['971', '974', '966', '965', '973'].includes(num) && traitBonus > TRAITS_CAP) {
                traitBonus = TRAITS_CAP;
            }

            // Calculate final score
            let finalScore = score + traitBonus;

            // Apply Gulf Mode multiplier - ALWAYS apply 1.5x for Dubai/UAE
            if (num === '971') {
                finalScore = Math.round(finalScore * 1.5); // Special Dubai multiplier
            } else if (gulfMode || true) { // Always apply GCC multiplier to match CSV
                const hasGulfTraits = traits.some(t => t.type === 'gulf') || 
                                    ['974', '966', '965', '973'].includes(num);
                if (hasGulfTraits) {
                    finalScore = Math.round(finalScore * 1.15);
                }
            }

            // Build enhanced description
            let description = baseData.description;
            if (traits.length > 0) {
                const traitNames = traits.map(t => t.name).join(', ');
                description += ` + ${traitNames}`;
            }

            return {
                tier: baseData.tier,
                patterns: baseData.patterns,
                traits: traits,
                description: description,
                score: finalScore,
                baseScore: score,
                traitBonus: traitBonus
            };
        }

        // Base number analysis (original system)
        function analyzeNumberBase(num) {
            const d1 = num[0];
            const d2 = num[1];
            const d3 = num[2];
            const patterns = [];
            let tier = 'C';
            let description = 'Standard number';
            let score = 100;

            // Luxury car models list
            const luxuryCars = {
                // Porsche
                '911': 'Porsche 911', '930': 'Porsche 930', '935': 'Porsche 935', '959': 'Porsche 959',
                '918': 'Porsche 918', '992': 'Porsche 992', '991': 'Porsche 991', '997': 'Porsche 997',
                '993': 'Porsche 993', '964': 'Porsche 964', '981': 'Porsche 981', '982': 'Porsche 982',
                '718': 'Porsche 718',
                // Ferrari
                '250': 'Ferrari 250', '275': 'Ferrari 275', '288': 'Ferrari 288', '296': 'Ferrari 296',
                '308': 'Ferrari 308', '328': 'Ferrari 328', '348': 'Ferrari 348', '355': 'Ferrari 355',
                '360': 'Ferrari 360', '430': 'Ferrari 430', '458': 'Ferrari 458', '488': 'Ferrari 488',
                '512': 'Ferrari 512', '550': 'Ferrari 550', '575': 'Ferrari 575', '599': 'Ferrari 599',
                '612': 'Ferrari 612', '812': 'Ferrari 812',
                // Lamborghini
                '350': 'Lamborghini 350', '400': 'Lamborghini 400', '560': 'Lamborghini 560',
                '570': 'Lamborghini 570', '580': 'Lamborghini 580', '610': 'Lamborghini 610',
                '640': 'Lamborghini 640', '670': 'Lamborghini 670', '700': 'Lamborghini 700',
                '780': 'Lamborghini 780',
                // McLaren
                '540': 'McLaren 540', '570': 'McLaren 570', '600': 'McLaren 600', '650': 'McLaren 650',
                '675': 'McLaren 675', '720': 'McLaren 720', '765': 'McLaren 765',
                // Mercedes-Benz
                '300': 'Mercedes 300', '500': 'Mercedes 500', '560': 'Mercedes 560', '600': 'Mercedes 600',
                // BMW
                '750': 'BMW 750', '760': 'BMW 760', '850': 'BMW 850',
                // Others
                '110': 'Bugatti 110', '220': 'Jaguar 220', '222': 'Maserati 222', '228': 'Maserati 228'
            };

            // Check for triples
            if (d1 === d2 && d2 === d3) {
                patterns.push('triple');
                tier = 'S+';
                description = `Triple ${d1}s - Ultra rare`;
                score = 10000;
                
                // Special triple scores - Updated to match CSV
                if (num === '000') score = 15160;  // Highest base score
                else if (num === '888') score = 14250;  // Second highest
                else if (num === '777') score = 13720;  // Third
                else if (num === '999') score = 13190;  // Fourth
                else if (num === '111') score = 12175;
                else if (num === '222') score = 11615;
                else if (num === '333') score = 11130;
                else if (num === '555') score = 10645;
                else if (num === '666') score = 9620;   // No clean bonus
                else if (num === '444') score = 8000;   // Death penalty
            }
            // Check for 00X
            else if (d1 === '0' && d2 === '0') {
                patterns.push('first-ten');
                tier = 'S';
                description = 'First ten - Very rare';
                score = 8000;
                
                if (num === '007') {
                    description = 'James Bond + Lucky 7 + First Ten';
                    score = 9500;
                } else if (num === '008') {
                    score = 9000;
                } else if (num === '001') {
                    score = 8800;
                } else if (num === '009') {
                    score = 8500;
                } else if (num === '002') {
                    score = 8200;
                } else if (num === '003') {
                    score = 8300;
                } else if (num === '005') {
                    score = 8100;
                } else if (num === '006') {
                    score = 7800;
                } else if (num === '004') {
                    score = 7600;
                }
            }
            // Special numbers
            else if (num === '420') {
                patterns.push('meme');
                tier = 'A+';
                description = 'Cannabis culture - Premium meme';
                score = 7500;
            }
            else if (num === '123') {
                patterns.push('sequence');
                tier = 'A+';
                description = 'The sequence - Premium';
                score = 7000;
            }
            else if (num === '321') {
                patterns.push('sequence');
                tier = 'A+';
                description = 'Countdown - Premium';
                score = 6500;
            }
            // Premium palindromes
            else if (d1 === d3) {
                patterns.push('palindrome');
                
                if (num === '101') {
                    tier = 'A+';
                    description = 'Binary/Introduction - Premium palindrome';
                    score = 5500;
                } else if (num === '404') {
                    tier = 'A+';
                    description = 'Error Not Found - Premium palindrome';
                    score = 6000;
                } else if (num === '212') {
                    tier = 'A+';
                    description = 'Manhattan NYC - Premium palindrome';
                    score = 5800;
                } else if (num === '808') {
                    tier = 'A+';
                    description = 'TR-808 Drum Machine - Premium palindrome';
                    score = 5600;
                } else if (num === '818') {
                    tier = 'A+';
                    description = 'Los Angeles - Premium palindrome';
                    score = 5400;
                } else if (num === '911') {
                    tier = 'A+';
                    description = 'Emergency US - Cultural palindrome';
                    score = 5700;
                } else if (d1 === '0' && d3 === '0') {
                    tier = 'A+';
                    description = 'Palindrome with zeros';
                    score = 4500;
                    
                    if (num === '010') {
                        score = 6000;
                    }
                } else {
                    tier = 'A';
                    description = 'Palindrome';
                    score = 3000;
                }
            }
            // Sequences
            else if (['234', '345', '456', '567', '678', '789', '012', '987', '876', '765', '654', '543', '432', '210'].includes(num)) {
                patterns.push('sequence');
                tier = 'A';
                description = 'Sequence';
                score = 4000;
            }
            // Round hundreds
            else if (d2 === '0' && d3 === '0' && d1 !== '0') {
                patterns.push('century');
                tier = 'A';
                description = 'Round hundred';
                score = 3500;
                if (num === '100') {
                    description = 'Perfect 100 üíØ';
                    score = 4200;
                }
            }
            // Leading zero
            else if (d1 === '0') {
                patterns.push('leading-zero');
                tier = 'B+';
                description = 'Leading zero';
                score = 2000;
                
                if (parseInt(num) < 100) {
                    score += 1000;
                    description = 'First hundred';
                    
                    if (parseInt(num) < 20) {
                        score += 500;
                        description = 'First twenty - Premium';
                    }
                }
            }
            // Double digits
            else if (d1 === d2 || d2 === d3 || d1 === d3) {
                patterns.push('double');
                tier = 'B';
                description = 'Double digits';
                score = 1500;
                
                if (d1 === d2) score += 100;
                if (d2 === d3 && (d3 === '8' || d3 === '7')) score += 200;
            }

            // Digit value modifiers
            const digitScore = {
                '8': 50, '7': 40, '9': 30, '1': 25, '0': 20,
                '5': 15, '3': 10, '2': 5, '6': -10, '4': -20
            };
            
            score += digitScore[d1] + digitScore[d2] + digitScore[d3];
            
            // Penalties for multiple bad digits - Skip if luxury car
            const badDigitCount = [d1, d2, d3].filter(d => d === '4' || d === '6').length;
            const isLuxuryCar = Object.keys(luxuryCars).includes(num);
            if (badDigitCount >= 2 && !isLuxuryCar) score -= 100 * badDigitCount;
            
            // Leading position penalty - Skip if luxury car
            if ((d1 === '4' || d1 === '6') && !isLuxuryCar) score -= 50;

            return { tier, patterns, description, score };
        }

        // Toggle Gulf Mode
        function toggleGulfMode() {
            gulfMode = !gulfMode;
            document.getElementById('modeStatus').textContent = gulfMode ? 'ON' : 'OFF';
            document.querySelector('.mode-toggle').classList.toggle('active', gulfMode);
            
            // Recalculate all scores
            initializeData();
            
            // Update current view
            const activeSection = document.querySelector('.section.active').id;
            if (activeSection === 'rankings') {
                updateRankingView();
            } else if (activeSection === 'explorer') {
                filterNumbers();
            } else if (activeSection === 'insights') {
                populateTopPerformers();
                // Re-analyze current number if any
                const currentNumber = document.getElementById('insightNumber').value;
                if (currentNumber) {
                    analyzeNumber();
                }
            }
        }

        // Update rankings - Fixed sorting
        function updateRankings() {
            // Sort by score (descending) - highest score gets rank 1
            numbersData.sort((a, b) => {
                // Special handling to ensure 000 is always first
                if (a.number === '000') return -1;
                if (b.number === '000') return 1;
                
                // Otherwise sort by score
                return b.score - a.score;
            });
            
            // Assign ranks
            numbersData.forEach((data, index) => {
                data.rank = index + 1;
            });
        }

        // Show section
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById(sectionName).classList.add('active');
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + sectionName) {
                    link.classList.add('active');
                }
            });
            
            if (sectionName === 'explorer' && document.getElementById('numbersGrid').children.length === 0) {
                loadExplorer();
            } else if (sectionName === 'rankings') {
                updateRankingView();
            } else if (sectionName === 'insights') {
                populateTopPerformers();
            }
        }

        // Update ranking view
        function updateRankingView() {
            const limit = parseInt(document.getElementById('rankingView')?.value || '50');
            const traitFilter = document.getElementById('traitFilter')?.value || '';
            const container = document.getElementById('rankingsContainer');
            if (!container) return;
            
            // Filter by trait if selected
            let displayData = [...numbersData];
            if (traitFilter) {
                displayData = displayData.filter(data => 
                    data.traits.some(t => t.type === traitFilter)
                );
            }
            
            // Sort by rank
            displayData.sort((a, b) => a.rank - b.rank);
            
            // Apply limit
            const actualLimit = Math.min(limit, displayData.length);
            displayData = displayData.slice(0, actualLimit);
            
            let html = `
                <div style="margin-bottom: var(--space-md); color: var(--text-secondary);">
                    Showing ${displayData.length} of ${traitFilter ? displayData.length + ' filtered' : numbersData.length} total numbers
                </div>
                <table class="rankings-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Number</th>
                            <th>Tier</th>
                            <th>Base Score</th>
                            <th>Trait Bonus</th>
                            <th>Total Score</th>
                            <th>Traits</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            displayData.forEach(data => {
                const rankClass = data.rank <= 3 ? `rank-${data.rank}` : '';
                const traitNames = data.traits.map(t => t.name).join(', ') || '‚Äî';
                
                html += `
                    <tr onclick="showNumberDetails(numbersData.find(d => d.number === '${data.number}'))" style="cursor: pointer;">
                        <td class="rank-number ${rankClass}">#${data.rank}</td>
                        <td style="font-weight: 600;">${data.number}.eth</td>
                        <td><span class="tier-${data.tier.toLowerCase().replace('+', '-plus')}">${data.tier}</span></td>
                        <td>${data.baseScore.toLocaleString()}</td>
                        <td style="color: var(--accent);">${data.traitBonus > 0 ? '+' + data.traitBonus.toLocaleString() : '‚Äî'}</td>
                        <td style="font-weight: 700;">${data.score.toLocaleString()}</td>
                        <td style="font-size: 14px; color: var(--text-secondary);">${traitNames}</td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        // Load explorer
        function loadExplorer() {
            const grid = document.getElementById('numbersGrid');
            grid.innerHTML = '';
            
            numbersData.forEach(data => {
                const card = createNumberCard(data);
                grid.appendChild(card);
            });
        }

        // Create number card
        function createNumberCard(data) {
            const card = document.createElement('div');
            let cardClasses = `number-card tier-${data.tier.toLowerCase().replace('+', '-plus')}`;
            
            if (data.traits.length > 0) {
                cardClasses += ' has-traits';
            }
            
            if (data.traits.some(t => t.type === 'gulf')) {
                cardClasses += ' gulf-premium';
            }
            
            card.className = cardClasses;
            card.onclick = () => showNumberDetails(data);
            
            card.innerHTML = `
                <div class="number">${data.number}</div>
                <div class="number-tier tier-${data.tier.toLowerCase().replace('+', '-plus')}">${data.tier}</div>
            `;
            
            return card;
        }

        // Show number details
        function showNumberDetails(data) {
            const modal = document.getElementById('modal');
            document.getElementById('modalTitle').textContent = `${data.number}.eth`;
            
            let content = `
                <div class="analysis-grid">
                    <div class="analysis-stat">
                        <div class="analysis-value rank-${data.rank <= 3 ? data.rank : 'number'}">#${data.rank}</div>
                        <div class="analysis-label">Rank</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value tier-${data.tier.toLowerCase().replace('+', '-plus')}">${data.tier}</div>
                        <div class="analysis-label">Tier</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value">${data.score.toLocaleString()}</div>
                        <div class="analysis-label">Score</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value">${data.patterns.length + data.traits.length}</div>
                        <div class="analysis-label">Traits</div>
                    </div>
                </div>
            `;
            
            content += `
                <div style="margin-top: var(--space-xl);">
                    <p><strong>Base Pattern:</strong> ${data.patterns.join(', ') || 'None'}</p>
                    <p><strong>Description:</strong> ${data.description}</p>
            `;
            
            // Enhanced trivia
            if (ENHANCED_TRIVIA[data.number]) {
                content += `<p style="margin-top: var(--space-md);"><strong>Special Significance:</strong> ${ENHANCED_TRIVIA[data.number]}</p>`;
            }
            
            // Score breakdown
            content += `
                <h4 style="margin-top: var(--space-xl);">Score Breakdown</h4>
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: var(--space-sm) 0;">Base Score: <strong>${data.baseScore.toLocaleString()}</strong></li>
            `;
            
            if (data.traits.length > 0) {
                content += `<li style="padding: var(--space-sm) 0;">Trait Bonuses:</li><ul style="margin-left: var(--space-lg); list-style: none;">`;
                data.traits.forEach(trait => {
                    content += `<li style="padding: var(--space-xs) 0;">‚Üí ${trait.name}: <strong>+${trait.bonus.toLocaleString()}</strong></li>`;
                });
                content += `</ul>`;
            }
            
            if (gulfMode && data.traits.some(t => t.type === 'gulf' || t.type === 'religious')) {
                content += `<li style="padding: var(--space-sm) 0;">Gulf Mode Multiplier: <strong>√ó1.15</strong></li>`;
            }
            
            content += `
                    <li style="padding: var(--space-sm) 0; font-size: 20px; margin-top: var(--space-md);"><strong>Total Score: ${data.score.toLocaleString()}</strong></li>
                </ul>
            `;
            
            // Add trait tags
            if (data.traits.length > 0) {
                content += `<div class="trait-tags" style="margin-top: var(--space-lg);">`;
                data.traits.forEach(trait => {
                    const traitClass = trait.type === 'gulf' ? 'gulf' : 
                                     trait.type === 'religious' ? 'religious' : 
                                     trait.type === 'tech' ? 'tech' : '';
                    content += `<span class="trait-tag ${traitClass}">${trait.name}</span>`;
                });
                content += `</div>`;
            }
            
            // Enhanced special insights
            if (data.number === '000') {
                content += `
                    <div class="info-box" style="margin-top: var(--space-xl);">
                        <p><strong>Sale History:</strong> Sold for 300 ETH (July 2022) - Highest 999 Club sale ever</p>
                    </div>
                `;
            } else if (data.number === '971') {
                content += `
                    <div class="info-box" style="margin-top: var(--space-xl);">
                        <p><strong>Regional Significance:</strong> UAE country code - Extremely popular in Gulf region. Symbol of UAE's prosperity and innovation.</p>
                    </div>
                `;
            }
            
            content += `</div>`;
            
            document.getElementById('modalContent').innerHTML = content;
            modal.classList.add('active');
        }

        // Analyze individual number
        function analyzeNumber() {
            const input = document.getElementById('insightNumber').value;
            if (!input) return;
            
            const number = input.padStart(3, '0');
            const data = numbersData.find(d => d.number === number);
            
            if (!data) {
                document.getElementById('numberAnalysis').innerHTML = '<p style="color: var(--text-secondary);">Please enter a valid number (000-999)</p>';
                document.getElementById('numberAnalysis').style.display = 'block';
                return;
            }
            
            // Show analysis
            let analysisHTML = `
                <div class="analysis-grid">
                    <div class="analysis-stat">
                        <div class="analysis-value" style="font-family: monospace;">${number}</div>
                        <div class="analysis-label">Number</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value rank-${data.rank <= 3 ? data.rank : 'number'}">#${data.rank}</div>
                        <div class="analysis-label">Rank</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value tier-${data.tier.toLowerCase().replace('+', '-plus')}">${data.tier}</div>
                        <div class="analysis-label">Tier</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value" style="color: var(--accent);">${data.score.toLocaleString()}</div>
                        <div class="analysis-label">Score</div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: var(--space-xl); background: var(--bg-secondary);">
                    <h4 style="color: var(--accent); margin-bottom: var(--space-md);">AI Insights</h4>
                    <p>${ENHANCED_TRIVIA[number] || 'A unique 3-digit number with its own special properties.'}</p>
                    <p style="margin-top: var(--space-sm);"><strong>Pattern Analysis:</strong> ${data.description}</p>
                </div>
            `;
            
            if (data.traits.length > 0) {
                analysisHTML += '<div class="trait-tags" style="margin-top: var(--space-lg);">';
                data.traits.forEach(trait => {
                    const traitClass = trait.type === 'gulf' ? 'gulf' : 
                                     trait.type === 'religious' ? 'religious' : 
                                     trait.type === 'tech' ? 'tech' : '';
                    analysisHTML += `<span class="trait-tag ${traitClass}">${trait.name} (+${trait.bonus})</span>`;
                });
                analysisHTML += '</div>';
            }
            
            document.getElementById('numberAnalysis').innerHTML = analysisHTML;
            document.getElementById('numberAnalysis').style.display = 'block';
            
            // Update similar numbers and charts
            findSimilarNumbers(data);
            updateTraitChart(data);
            updateTotalScore(data.score);
        }

        // Get random number
        function getRandomNumber() {
            const randomNum = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            document.getElementById('insightNumber').value = randomNum;
            analyzeNumber();
        }

        // Find similar numbers
        function findSimilarNumbers(selectedData) {
            const similars = numbersData
                .filter(d => d.number !== selectedData.number)
                .map(d => {
                    const similarity = calculateJaccardSimilarity(selectedData.traits, d.traits);
                    return { ...d, similarity };
                })
                .sort((a, b) => b.similarity - a.similarity)
                .slice(0, 8);
            
            let html = '';
            similars.forEach(d => {
                html += `
                    <div class="card" style="padding: var(--space-md); text-align: center; cursor: pointer;"
                         onclick="document.getElementById('insightNumber').value='${d.number}'; analyzeNumber();">
                        <div style="font-size: 24px; font-weight: 700; font-family: monospace; margin-bottom: var(--space-xs);">${d.number}</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">Similarity: ${(d.similarity * 100).toFixed(0)}%</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">Rank #${d.rank}</div>
                    </div>
                `;
            });
            
            document.getElementById('similarNumbers').innerHTML = html;
        }

        // Calculate Jaccard similarity
        function calculateJaccardSimilarity(traits1, traits2) {
            const set1 = new Set(traits1.map(t => t.type || t.name));
            const set2 = new Set(traits2.map(t => t.type || t.name));
            
            const intersection = new Set([...set1].filter(x => set2.has(x)));
            const union = new Set([...set1, ...set2]);
            
            return union.size === 0 ? 0 : intersection.size / union.size;
        }

        // Update trait chart
        function updateTraitChart(data) {
            let chartHTML = `
                <div style="display: flex; gap: var(--space-sm); flex-wrap: wrap;">
                    <div style="background: var(--accent); color: white; padding: var(--space-md); border-radius: var(--radius-md); text-align: center; flex: 1; min-width: 120px;">
                        <div style="font-weight: 700; font-size: 24px;">${data.baseScore.toLocaleString()}</div>
                        <div style="font-size: 13px; margin-top: var(--space-xs);">Base Score</div>
                    </div>
            `;
            
            data.traits.forEach(trait => {
                const colors = {
                    'gulf': 'var(--gulf-gold)',
                    'religious': '#8B008B',
                    'tech': '#00CED1',
                    'clean': 'var(--b-plus)',
                    'genesis': 'var(--gulf-gold)'
                };
                const bgColor = colors[trait.type] || 'var(--text-secondary)';
                
                chartHTML += `
                    <div style="background: ${bgColor}; color: white; padding: var(--space-md); border-radius: var(--radius-md); text-align: center; flex: 1; min-width: 120px;">
                        <div style="font-weight: 700; font-size: 20px;">+${trait.bonus}</div>
                        <div style="font-size: 11px; margin-top: var(--space-xs);">${trait.name.split(' - ')[0]}</div>
                    </div>
                `;
            });
            
            chartHTML += '</div>';
            document.getElementById('traitChart').innerHTML = chartHTML;
        }

        // Update total score
        function updateTotalScore(score) {
            document.getElementById('totalScore').textContent = score.toLocaleString();
        }

        // Populate top performers
        function populateTopPerformers() {
            const gulfNumbers = numbersData.filter(d => d.traits.some(t => t.type === 'gulf')).slice(0, 5);
            const religiousNumbers = numbersData.filter(d => d.traits.some(t => t.type === 'religious')).slice(0, 5);
            const techNumbers = numbersData.filter(d => d.traits.some(t => t.type === 'tech')).slice(0, 5);
            const cleanNumbers = numbersData.filter(d => d.traits.some(t => t.type === 'clean')).slice(0, 5);
            
            document.getElementById('topGulf').innerHTML = gulfNumbers.map(d => 
                `<div onclick="document.getElementById('insightNumber').value='${d.number}'; analyzeNumber();" 
                      style="cursor: pointer; padding: var(--space-sm); background: var(--bg-secondary); margin: var(--space-xs) 0; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                    <span style="font-weight: 600;">${d.number}</span>
                    <span style="color: var(--text-secondary);">#${d.rank}</span>
                </div>`
            ).join('');
            
            document.getElementById('topReligious').innerHTML = religiousNumbers.map(d => 
                `<div onclick="document.getElementById('insightNumber').value='${d.number}'; analyzeNumber();" 
                      style="cursor: pointer; padding: var(--space-sm); background: var(--bg-secondary); margin: var(--space-xs) 0; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                    <span style="font-weight: 600;">${d.number}</span>
                    <span style="color: var(--text-secondary);">#${d.rank}</span>
                </div>`
            ).join('');
            
            document.getElementById('topTech').innerHTML = techNumbers.map(d => 
                `<div onclick="document.getElementById('insightNumber').value='${d.number}'; analyzeNumber();" 
                      style="cursor: pointer; padding: var(--space-sm); background: var(--bg-secondary); margin: var(--space-xs) 0; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                    <span style="font-weight: 600;">${d.number}</span>
                    <span style="color: var(--text-secondary);">#${d.rank}</span>
                </div>`
            ).join('');
            
            document.getElementById('topClean').innerHTML = cleanNumbers.map(d => 
                `<div onclick="document.getElementById('insightNumber').value='${d.number}'; analyzeNumber();" 
                      style="cursor: pointer; padding: var(--space-sm); background: var(--bg-secondary); margin: var(--space-xs) 0; border-radius: var(--radius-sm); display: flex; justify-content: space-between;">
                    <span style="font-weight: 600;">${d.number}</span>
                    <span style="color: var(--text-secondary);">#${d.rank}</span>
                </div>`
            ).join('');
        }

        // Calculate price
        function calculatePrice() {
            const floorPrice = parseFloat(document.getElementById('floorPrice').value) || 10;
            const numberInput = document.getElementById('calcNumber').value.padStart(3, '0');
            
            if (numberInput.length !== 3 || isNaN(parseInt(numberInput))) {
                document.getElementById('calcResults').style.display = 'none';
                return;
            }
            
            // Find the number data
            const data = numbersData.find(d => d.number === numberInput);
            if (!data) {
                document.getElementById('calcResults').innerHTML = '<p style="color: var(--text-secondary);">Invalid number</p>';
                document.getElementById('calcResults').style.display = 'block';
                return;
            }
            
            // Calculate multiplier based on score
            let multiplier = 1;
            const score = data.score;
            
            // Score-based multiplier calculation
            if (score >= 10000) {
                // S+ tier (triples)
                multiplier = 50 + ((score - 10000) / 5000) * 50; // 50-100x
            } else if (score >= 7500) {
                // S tier (first ten, special memes)
                multiplier = 20 + ((score - 7500) / 2500) * 10; // 20-30x
            } else if (score >= 5000) {
                // A+ tier (premium palindromes, sequences)
                multiplier = 10 + ((score - 5000) / 2500) * 10; // 10-20x
            } else if (score >= 3000) {
                // A tier (standard palindromes, centuries)
                multiplier = 5 + ((score - 3000) / 2000) * 10; // 5-15x
            } else if (score >= 2000) {
                // B+ tier (leading zeros, country codes)
                multiplier = 3 + ((score - 2000) / 1000) * 5; // 3-8x
            } else if (score >= 1000) {
                // B tier (doubles)
                multiplier = 2 + ((score - 1000) / 1000) * 2; // 2-4x
            } else if (score >= 500) {
                // C+ tier (notable)
                multiplier = 1.5 + ((score - 500) / 500) * 1; // 1.5-2.5x
            } else {
                // C tier (standard)
                multiplier = 1;
            }
            
            // Apply Gulf Mode bonus if active
            if (gulfMode && data.traits.some(t => t.type === 'gulf')) {
                multiplier *= 1.2; // 20% regional premium
            }
            
            // Round to 2 decimal places
            multiplier = Math.round(multiplier * 100) / 100;
            
            const estimatedPrice = floorPrice * multiplier;
            const lowEstimate = estimatedPrice * 0.8;
            const highEstimate = estimatedPrice * 1.2;
            
            // Create results HTML
            let resultsHTML = `
                <div class="calc-result">
                    <div class="calc-result-value">${lowEstimate.toFixed(1)} - ${highEstimate.toFixed(1)} ETH</div>
                    <p style="font-size: 20px; color: var(--text-secondary); margin-top: var(--space-sm);">
                        Estimated value for ${numberInput}.eth
                    </p>
                    <p style="font-size: 17px; color: var(--accent); margin-top: var(--space-xs);">
                        Mid estimate: ${estimatedPrice.toFixed(2)} ETH (${multiplier}x floor)
                    </p>
                </div>

                <div class="analysis-grid" style="margin-top: var(--space-xl);">
                    <div class="analysis-stat">
                        <div class="analysis-value">#${data.rank}</div>
                        <div class="analysis-label">Rank</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value tier-${data.tier.toLowerCase().replace('+', '-plus')}">${data.tier}</div>
                        <div class="analysis-label">Tier</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value">${data.score.toLocaleString()}</div>
                        <div class="analysis-label">Score</div>
                    </div>
                    <div class="analysis-stat">
                        <div class="analysis-value" style="color: var(--accent);">${multiplier}x</div>
                        <div class="analysis-label">Multiplier</div>
                    </div>
                </div>
                
                <div style="margin-top: var(--space-xl);">
                    <h4>Valuation Breakdown</h4>
                    <p><strong>Base Pattern:</strong> ${data.patterns.join(', ') || 'None'}</p>
                    <p><strong>Description:</strong> ${data.description}</p>
            `;
            
            if (data.traits.length > 0) {
                resultsHTML += '<div class="trait-tags" style="margin-top: var(--space-md);">';
                data.traits.forEach(trait => {
                    const traitClass = trait.type === 'gulf' ? 'gulf' : 
                                     trait.type === 'religious' ? 'religious' : 
                                     trait.type === 'tech' ? 'tech' : '';
                    resultsHTML += `<span class="trait-tag ${traitClass}">${trait.name} (+${trait.bonus})</span>`;
                });
                resultsHTML += '</div>';
            }
            
            // Add market tips
            resultsHTML += `
                </div>
                
                <div class="info-box" style="margin-top: var(--space-xl);">
                    <p><strong>üí° Market Intelligence</strong></p>
            `;
            
            if (data.tier === 'S+' || data.tier === 'S') {
                resultsHTML += '<p>‚Ä¢ Ultra-rare tier - These rarely come to market and command premium prices</p>';
            }
            if (data.traits.some(t => t.type === 'gulf')) {
                resultsHTML += '<p>‚Ä¢ Gulf premium number - Consider marketing to Middle Eastern collectors</p>';
            }
            if (data.traits.some(t => t.type === 'religious')) {
                resultsHTML += '<p>‚Ä¢ Religious significance - Appeals to specific faith communities</p>';
            }
            if (data.patterns.includes('triple') || data.patterns.includes('palindrome')) {
                resultsHTML += '<p>‚Ä¢ Visual pattern - Easy to remember and market</p>';
            }
            if (!numberInput.includes('4') && !numberInput.includes('6')) {
                resultsHTML += '<p>‚Ä¢ Clean number - No unlucky digits adds value in Asian markets</p>';
            }
            
            resultsHTML += `
                </div>
            `;
            
            document.getElementById('calcResults').innerHTML = resultsHTML;
            document.getElementById('calcResults').style.display = 'block';
        }

        // Filter numbers
        function filterNumbers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const tierFilter = document.getElementById('tierFilter').value;
            const patternFilter = document.getElementById('patternFilter').value;
            
            const grid = document.getElementById('numbersGrid');
            grid.innerHTML = '';
            
            const filtered = numbersData.filter(data => {
                const matchesSearch = data.number.includes(searchTerm);
                const matchesTier = !tierFilter || data.tier === tierFilter;
                
                let matchesPattern = !patternFilter;
                if (patternFilter) {
                    if (patternFilter === 'gulf-premium') {
                        matchesPattern = data.traits.some(t => t.type === 'gulf');
                    } else if (patternFilter === 'religious') {
                        matchesPattern = data.traits.some(t => t.type === 'religious');
                    } else if (patternFilter === 'tech') {
                        matchesPattern = data.traits.some(t => t.type === 'tech');
                    } else {
                        matchesPattern = data.patterns.includes(patternFilter);
                    }
                }
                
                return matchesSearch && matchesTier && matchesPattern;
            });
            
            filtered.forEach(data => {
                const card = createNumberCard(data);
                grid.appendChild(card);
            });
        }

        // Close modal
        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Click outside modal to close
        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
                